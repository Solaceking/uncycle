<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Uncycle - Transform waste into wonderful. Find creative ways to give items a second life.">
    <meta name="keywords" content="recycling, upcycling, sustainability, reuse, eco-friendly">
    <title>Uncycle - Transform Waste into Wonderful</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="manifest" href="{{ url_for('static', filename='manifest.json') }}">
    <!-- Add PWA meta tags -->
    <meta name="theme-color" content="#00A67E">
    <link rel="apple-touch-icon" href="{{ url_for('static', filename='icons/icon-192x192.png') }}">
    <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='images/favicon.ico') }}">
    <link rel="shortcut icon" type="image/x-icon" href="{{ url_for('static', filename='images/favicon.ico') }}">
    <script src="{{ url_for('static', filename='js/theme.js') }}"></script>
</head>
<body>
    <!-- Add this right after <body> -->
    <div class="splash-screen">
        <div class="splash-content">
            <div class="splash-logo">
                <svg class="splash-icon" viewBox="0 0 100 100">
                    <circle class="splash-circle" cx="50" cy="50" r="45" fill="none" stroke="currentColor"/>
                    <path class="splash-arrow" d="M35,50 L65,50 M55,40 L65,50 L55,60" fill="none" stroke="currentColor"/>
                </svg>
                <div class="splash-text">UNCYCLE</div>
            </div>
            <div class="splash-loader">
                <div class="splash-bar"></div>
            </div>
        </div>
    </div>

    <!-- Navigation -->
    <nav class="main-nav" role="navigation" aria-label="Main navigation">
        <div class="nav-left">
            <button 
                class="menu-toggle" 
                onclick="toggleSidebar()" 
                aria-label="Toggle menu" 
                aria-expanded="false"
                aria-controls="sidebar"
            >
                <div class="hamburger">
                    <span class="hamburger-line"></span>
                    <span class="hamburger-line"></span>
                    <span class="hamburger-line"></span>
                </div>
            </button>
            <a href="/" class="logo">UNCYCLE</a>
        </div>
        <div class="nav-right">
            <a href="#about">ABOUT</a>
            <a href="#categories">CATEGORIES</a>
            <a href="#contact">CONTACT</a>
        </div>
    </nav>

    <!-- After nav and before sidebar -->
    <header class="main-header">
        <div class="header-content">
            <div class="header-text">
                <div class="text-animation">
                    <div class="text-line">
                        TRANSFORM 
                        <div class="words">
                            <span>WASTE</span>
                            <span>PLASTIC</span>
                            <span>PAPER</span>
                            <span>GLASS</span>
                        </div>
                    </div>
                    <div class="text-line emphasis">INTO SOMETHING BEAUTIFUL</div>
                </div>
            </div>
        </div>
    </header>

    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
        <div class="sidebar-content">
            <!-- Materials Dropdown -->
            <div class="sidebar-dropdown">
                <button class="dropdown-trigger" onclick="toggleDropdown('materials')">
                    <span>MATERIALS</span>
                    <svg class="dropdown-arrow" viewBox="0 0 24 24">
                        <path d="M7 10l5 5 5-5"/>
                    </svg>
                </button>
                <div class="dropdown-content" id="materials-dropdown">
                    <a href="#" onclick="quickSearch('plastic')">PLASTIC</a>
                    <a href="#" onclick="quickSearch('glass')">GLASS</a>
                    <a href="#" onclick="quickSearch('paper')">PAPER</a>
                    <a href="#" onclick="quickSearch('metal')">METAL</a>
                    <a href="#" onclick="quickSearch('textile')">TEXTILE</a>
                </div>
            </div>

            <!-- Items Dropdown -->
            <div class="sidebar-dropdown">
                <button class="dropdown-trigger" onclick="toggleDropdown('items')">
                    <span>ITEMS</span>
                    <svg class="dropdown-arrow" viewBox="0 0 24 24">
                        <path d="M7 10l5 5 5-5"/>
                    </svg>
                </button>
                <div class="dropdown-content" id="items-dropdown">
                    <a href="#" onclick="quickSearch('bottles')">BOTTLES</a>
                    <a href="#" onclick="quickSearch('containers')">CONTAINERS</a>
                    <a href="#" onclick="quickSearch('furniture')">FURNITURE</a>
                    <a href="#" onclick="quickSearch('electronics')">ELECTRONICS</a>
                </div>
            </div>

            <!-- Settings Dropdown -->
            <div class="sidebar-dropdown">
                <button class="dropdown-trigger" onclick="toggleDropdown('settings')">
                    <span>SETTINGS</span>
                    <svg class="dropdown-arrow" viewBox="0 0 24 24">
                        <path d="M7 10l5 5 5-5"/>
                    </svg>
                </button>
                <div class="dropdown-content" id="settings-dropdown">
                    <div class="setting-item">
                        <label class="setting-label">Dark Mode</label>
                        <button class="theme-toggle" aria-label="Toggle dark mode">
                            <svg class="theme-icon" viewBox="0 0 24 24">
                                <path class="sun" d="M12 3v2m0 14v2M5.64 5.64l1.4 1.4m10.32 10.32l1.4 1.4M3 12h2m14 0h2M5.64 18.36l1.4-1.4m10.32-10.32l1.4-1.4"/>
                                <circle class="sun-circle" cx="12" cy="12" r="4"/>
                                <path class="moon" d="M12 3a9 9 0 109 9c0-4.97-4.03-9-9-9z"/>
                            </svg>
                        </button>
                    </div>
                    <div class="setting-item">
                        <label class="setting-label">Search History</label>
                        <button 
                            class="toggle-switch" 
                            onclick="SearchHistory.toggleHistory()" 
                            aria-label="Toggle search history"
                            aria-checked="false"
                        >
                            <span class="switch-track"></span>
                            <span class="switch-thumb"></span>
                        </button>
                    </div>
                    <button class="setting-action" onclick="Settings.showShortcutsModal()">
                        Keyboard Shortcuts ⌨️
                    </button>
                    <button class="setting-action warning" onclick="Settings.clearAllData()">
                        Reset All Data
                    </button>
                </div>
            </div>
        </div>

        <!-- Keep the footer -->
        <div class="sidebar-footer">
            <div class="dev-info">
                <img src="{{ url_for('static', filename='images/avatar.png') }}" alt="David Imongirie" class="dev-avatar">
                <div class="dev-details">
                    <h4>David Imongirie</h4>
                    <p>MSc Geography, University of Vienna</p>
                </div>
            </div>
            <div class="project-info">
                <div class="social-links">
                    <a href="https://github.com/solaceking" target="_blank" rel="noopener" aria-label="GitHub Profile">
                        <svg class="social-icon github" viewBox="0 0 24 24">
                            <path d="M12 0C5.37 0 0 5.37 0 12c0 5.3 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61-.546-1.385-1.335-1.755-1.335-1.755-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.605-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 21.795 24 17.295 24 12c0-6.63-5.37-12-12-12"/>
                        </svg>
                    </a>
                    <a href="mailto:david.imongirie@yahoo.co.uk" aria-label="Email Contact">
                        <span class="social-icon">✉️</span>
                    </a>
                </div>
                <small>v1.0.0</small>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Search Section with Quick Links -->
        <section class="search-section">
            <form id="searchForm" onsubmit="searchTutorials(event)">
                <input 
                    type="text" 
                    name="q" 
                    placeholder="SEARCH TUTORIALS" 
                    required
                >
            </form>
            
            <div class="quick-search">
                <div class="quick-search-title">POPULAR SEARCHES</div>
                <div class="quick-search-grid">
                    <button onclick="quickSearch('plastic bottles')" class="quick-link">
                        <span class="icon">♳</span>
                        <span class="text">PLASTIC BOTTLES</span>
                    </button>
                    <button onclick="quickSearch('glass jars')" class="quick-link">
                        <span class="icon">🫙</span>
                        <span class="text">GLASS JARS</span>
                    </button>
                    <button onclick="quickSearch('cardboard')" class="quick-link">
                        <span class="icon">📦</span>
                        <span class="text">CARDBOARD</span>
                    </button>
                    <button onclick="quickSearch('clothing')" class="quick-link">
                        <span class="icon">👕</span>
                        <span class="text">CLOTHING</span>
                    </button>
                </div>
            </div>
        </section>

        <!-- Add after search box -->
        <div class="filter-controls">
            <div class="filter-group">
                <label>SORT BY</label>
                <select onchange="updateSort(this.value)">
                    <option value="relevance">Relevance</option>
                    <option value="date">Date</option>
                    <option value="views">Views</option>
                    <option value="rating">Rating</option>
                </select>
            </div>
            <div class="filter-group">
                <label>DURATION</label>
                <select onchange="updateDuration(this.value)">
                    <option value="any">Any Length</option>
                    <option value="short">Short (< 5min)</option>
                    <option value="medium">Medium (5-20min)</option>
                    <option value="long">Long (> 20min)</option>
                </select>
            </div>
        </div>

        <!-- Grid Layout -->
        <section class="grid-layout">
            <div id="results" class="project-grid">
                <!-- Add a loading placeholder -->
                <div class="search-placeholder">
                    Search for items to upcycle
                </div>
            </div>
        </section>
    </main>

    <script src="{{ url_for('static', filename='js/main.js') }}"></script>

    <!-- Add notification container -->
    <div id="notification-container" aria-live="polite"></div>

    <!-- Add loading indicator -->
    <div id="loading-indicator" class="loading-indicator" role="status" aria-hidden="true">
        <div class="spinner"></div>
    </div>

    <!-- Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=YOUR-GA-ID"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'YOUR-GA-ID');
    </script>

    <!-- Update Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', async () => {
                try {
                    const registration = await navigator.serviceWorker.register('/static/js/sw.js');
                    console.log('ServiceWorker registration successful');

                    // Handle updates
                    registration.addEventListener('updatefound', () => {
                        const newWorker = registration.installing;
                        newWorker.addEventListener('statechange', () => {
                            if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                                // New version available
                                if (confirm('New version available! Reload to update?')) {
                                    newWorker.postMessage({ action: 'skipWaiting' });
                                    window.location.reload();
                                }
                            }
                        });
                    });
                } catch (error) {
                    console.error('ServiceWorker registration failed:', error);
                }
            });
        }
    </script>

    <!-- Add history section -->
    <div class="history-section">
        <h3>Recent Searches</h3>
        <div id="search-history"></div>
    </div>

    <!-- Add trending section -->
    <div class="trending-section">
        <h3>Trending Searches</h3>
        <div id="trending-searches"></div>
    </div>

    <!-- Update video card template -->
    <div class="video-card">
        <button 
            class="favorite-button" 
            onclick="toggleFavorite('${video.id}', '${video.title}')"
        >♥</button>
        <!-- Rest of video card content -->
    </div>

    <!-- Tutorial Modal -->
    <div class="tutorial-modal hidden">
        <div class="tutorial-slides">
            <!-- Slide 1 -->
            <div class="tutorial-slide" data-step="1">
                <div class="slide-content">
                    <div class="slide-icon">🔍</div>
                    <h2>Search Anything</h2>
                    <p>Type any item you want to reuse - bottles, paper, clothing, anything!</p>
                </div>
            </div>

            <!-- Slide 2 -->
            <div class="tutorial-slide" data-step="2">
                <div class="slide-content">
                    <div class="slide-icon">💡</div>
                    <h2>Get Creative Ideas</h2>
                    <p>Browse through thousands of creative upcycling tutorials and projects.</p>
                </div>
            </div>

            <!-- Slide 3 -->
            <div class="tutorial-slide" data-step="3">
                <div class="slide-content">
                    <div class="slide-icon">♻️</div>
                    <h2>Start Creating</h2>
                    <p>Follow step-by-step guides to transform waste into wonderful items!</p>
                </div>
            </div>
        </div>

        <div class="tutorial-controls">
            <div class="progress-dots"></div>
            <button class="tutorial-next">Next</button>
            <button class="tutorial-skip">Skip Tutorial</button>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/search-history.js') }}"></script>

    <script src="{{ url_for('static', filename='js/settings.js') }}"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            ThemeManager.init();
            SearchHistory.init();
            Settings.init();
        });
    </script>

    <!-- Add after other scripts -->
    <script src="{{ url_for('static', filename='js/share.js') }}"></script>
    <script src="{{ url_for('static', filename='js/keyboard.js') }}"></script>
    <script src="{{ url_for('static', filename='js/loading.js') }}"></script>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            ThemeManager.init();
            SearchHistory.init();
            Settings.init();
            ShareManager.init();
            KeyboardManager.init();
            LoadingManager.init();
        });
    </script>
</body>
</html> 